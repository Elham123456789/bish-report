<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تقرير تنفيذ برنامج</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      text-align: center;
    }
    .container {
      width: 80%;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      border-bottom: 2px solid #ddd;
      background: #005f73;
      color: #fff;
      border-radius: 5px;
      gap: 5px;
    }
    .header img {
      width: 80px;
    }
    .title {
      background-color: #005f73;
      color: #fff;
      padding: 10px;
      font-size: 18px;
      border-radius: 5px;
      margin-top: 10px;
    }
    .section {
      margin: 15px 0;
      text-align: center;
    }
    .section label {
      display: block;
      font-weight: bold;
      margin-bottom: 5px;
    }
    .section input,
    .section textarea,
    .section input[type="file"] {
      width: 80%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      text-align: center;
    }
    .buttons {
      margin-top: 20px;
    }
    .buttons button {
      padding: 10px 20px;
      margin: 5px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      font-size: 16px;
    }
    .print-btn {
      background-color: #4C787E;
      color: #fff;
    }
    .footer {
      margin-top: 20px;
      font-size: 14px;
      text-align: left;
      color: #333;
    }
    .report-box {
      border: 2px solid #005f73;
      padding: 20px;
      border-radius: 10px;
      background: #eef5f7;
      margin-top: 20px;
    }
    .report-box p {
      font-size: 18px;
      margin: 10px 0;
    }
    .image-preview-box {
      border: 2px solid #005f73;
      padding: 15px;
      border-radius: 10px;
      background: #f9f9f9;
      margin-top: 20px;
      text-align: center;
    }
    .image-preview-box h3 {
      margin-bottom: 10px;
      font-size: 16px;
      color: #005f73;
    }
    .image-preview {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    .image-preview img {
      max-width: 150px;
      max-height: 150px;
      border: 1px solid #ccc;
      border-radius: 5px;
      object-fit: cover;
    }
    @media print {
      .buttons {
        display: none; /* إخفاء الأزرار أثناء الطباعة */
      }
    }
  </style>
</head>
<body>

  <div class="container" id="input-page">
    <div class="header">
      <img src="https://f.top4top.io/p_33273em8j9.png" alt="شعار وزارة التعليم">
      <div>
        <p>الإدارة العامة للتعليم بمنطقة: 
          <input type="text" id="education-office" placeholder="اكتب اسم الإدارة">
        </p>
        <p>مكتب التعليم بـ: 
          <input type="text" id="education-district" placeholder="اكتب اسم المكتب">
        </p>
      </div>
    </div>
    <p>مدرسة: 
      <input type="text" id="school-name" placeholder="اكتب اسم المدرسة">
    </p>

    <div class="section">
      <label>عنوان التقرير:</label>
      <input type="text" id="report-title" placeholder="اكتب عنوان التقرير هنا">
    </div>

    <div class="section">
      <label>المُنفذ:</label>
      <input type="text" id="executer" placeholder="اكتب اسم المنفذ">
    </div>

    <div class="section">
      <label>مكان التنفيذ:</label>
      <input type="text" id="location" placeholder="اكتب هنا">
    </div>

    <div class="section">
      <label>المستهدفون:</label>
      <input type="text" id="target" placeholder="اكتب هنا">
    </div>

    <div class="section">
      <label>عدد المستفيدين:</label>
      <input type="number" id="beneficiaries" placeholder="اكتب هنا">
    </div>

    <div class="section">
      <label>تاريخ التنفيذ:</label>
      <input type="date" id="date">
    </div>

    <div class="section">
      <label>الأهداف:</label>
      <textarea rows="4" id="goals" placeholder="اكتب الأهداف هنا"></textarea>
    </div>

    <div class="section">
      <label>نبذة:</label>
      <textarea rows="4" id="summary" placeholder="اكتب النبذة هنا"></textarea>
    </div>

    <div class="section">
      <label>إرفاق صور كشواهد (حد أقصى 9 صور):</label>
      <input type="file" id="image1" accept="image/*" onchange="previewImage(event, 1)">
      <input type="file" id="image2" accept="image/*" onchange="previewImage(event, 2)">
      <input type="file" id="image3" accept="image/*" onchange="previewImage(event, 3)">
      <input type="file" id="image4" accept="image/*" onchange="previewImage(event, 4)">
      <input type="file" id="image5" accept="image/*" onchange="previewImage(event, 5)">
      <input type="file" id="image6" accept="image/*" onchange="previewImage(event, 6)">
      <input type="file" id="image7" accept="image/*" onchange="previewImage(event, 7)">
      <input type="file" id="image8" accept="image/*" onchange="previewImage(event, 8)">
      <input type="file" id="image9" accept="image/*" onchange="previewImage(event, 9)">
    </div>

    <div class="section">
      <label>التوقيع:</label>
      <input type="file" id="signature-file" accept="image/*" onchange="previewSignature(event)">
    </div>

    <div class="buttons">
      <button class="print-btn" onclick="saveAndPrint()">حفظ وطباعة</button>
    </div>
  </div>

  <div class="container" id="preview-page" style="display: none;">
    <div class="header">
      <img src="https://f.top4top.io/p_33273em8j9.png" alt="شعار وزارة التعليم">
      <div>
        <p><strong>الإدارة العامة للتعليم بمنطقة:</strong> <span id="preview-education-office"></span></p>
        <p><strong>مدرسة:</strong> <span id="preview-school-name"></span></p>
        <p><strong>مكتب التعليم بـ:</strong> <span id="preview-education-district"></span></p>
      </div>
    </div>

    <div class="title" id="preview-report-title"></div>

    <div class="report-box">
      <p><strong>المُنفذ:</strong> <span id="preview-executer"></span></p>
      <p><strong>مكان التنفيذ:</strong> <span id="preview-location"></span></p>
      <p><strong>المستهدفون:</strong> <span id="preview-target"></span></p>
      <p><strong>عدد المستفيدين:</strong> <span id="preview-beneficiaries"></span></p>
      <p><strong>تاريخ التنفيذ (هجري):</strong> <span id="preview-hijri-date"></span></p>
      <p><strong>الأهداف:</strong> <span id="preview-goals"></span></p>
      <p><strong>نبذة:</strong> <span id="preview-summary"></span></p>
      <div class="image-preview-box">
        <h3>الصور كشواهد:</h3>
        <div class="image-preview">
          <img id="preview-image1" src="#" alt="صورة 1" style="display: none;">
          <img id="preview-image2" src="#" alt="صورة 2" style="display: none;">
          <img id="preview-image3" src="#" alt="صورة 3" style="display: none;">
          <img id="preview-image4" src="#" alt="صورة 4" style="display: none;">
          <img id="preview-image5" src="#" alt="صورة 5" style="display: none;">
          <img id="preview-image6" src="#" alt="صورة 6" style="display: none;">
          <img id="preview-image7" src="#" alt="صورة 7" style="display: none;">
          <img id="preview-image8" src="#" alt="صورة 8" style="display: none;">
          <img id="preview-image9" src="#" alt="صورة 9" style="display: none;">
        </div>
      </div>
      <p><strong>التوقيع:</strong> 
        <img id="preview-signature" alt="التوقيع" style="display: none; max-width: 150px;">
      </p>
    </div>
  </div>

  <script>
    function previewImage(event, imageNumber) {
      const reader = new FileReader();
      const imgElement = document.getElementById(`preview-image${imageNumber}`);
      const file = event.target.files[0];
      reader.onload = function() {
        imgElement.src = reader.result;
        imgElement.style.display = "block";
      };
      if (file) {
        reader.readAsDataURL(file);
      }
    }

    function previewSignature(event) {
      const reader = new FileReader();
      const imgElement = document.getElementById("preview-signature");
      const file = event.target.files[0];
      reader.onload = function() {
        imgElement.src = reader.result;
        imgElement.style.display = "block";
      };
      if (file) {
        reader.readAsDataURL(file);
      }
    }

    function showPreview() {
      document.getElementById("preview-education-office").innerText = 
        document.getElementById("education-office").value;
      document.getElementById("preview-school-name").innerText = 
        document.getElementById("school-name").value;
      document.getElementById("preview-education-district").innerText = 
        document.getElementById("education-district").value;
      document.getElementById("preview-report-title").innerText = 
        document.getElementById("report-title").value;
      document.getElementById("preview-executer").innerText = 
        document.getElementById("executer").value;
      document.getElementById("preview-location").innerText = 
        document.getElementById("location").value;
      document.getElementById("preview-target").innerText = 
        document.getElementById("target").value;
      document.getElementById("preview-beneficiaries").innerText = 
        document.getElementById("beneficiaries").value;
      // تحويل التاريخ الميلادي إلى هجري:
      const dateInput = document.getElementById("date");
      if (dateInput.value) {
        const gregDate = dateInput.valueAsDate;
        document.getElementById("preview-hijri-date").innerText = 
          gregDate.toLocaleDateString('ar-SA', { calendar: 'islamic', day: 'numeric', month: 'numeric', year: 'numeric' });
      } else {
        document.getElementById("preview-hijri-date").innerText = 
          new Date().toLocaleDateString('ar-SA', { calendar: 'islamic', day: 'numeric', month: 'numeric', year: 'numeric' });
      }
      document.getElementById("preview-goals").innerText = 
        document.getElementById("goals").value;
      document.getElementById("preview-summary").innerText = 
        document.getElementById("summary").value;
      document.getElementById("input-page").style.display = "none";
      document.getElementById("preview-page").style.display = "block";
    }

    function saveAndPrint() {
      showPreview();
      window.print();
    }

    window.onafterprint = function() {
      // إعادة ضبط جميع الحقول بعد الحفظ والطباعة
      document.getElementById("education-office").value = "";
      document.getElementById("education-district").value = "";
      document.getElementById("school-name").value = "";
      document.getElementById("report-title").value = "";
      document.getElementById("executer").value = "";
      document.getElementById("location").value = "";
      document.getElementById("target").value = "";
      document.getElementById("beneficiaries").value = "";
      document.getElementById("date").value = "";
      document.getElementById("goals").value = "";
      document.getElementById("summary").value = "";
      document.getElementById("image1").value = "";
      document.getElementById("image2").value = "";
      document.getElementById("image3").value = "";
      document.getElementById("image4").value = "";
      document.getElementById("image5").value = "";
      document.getElementById("image6").value = "";
      document.getElementById("image7").value = "";
      document.getElementById("image8").value = "";
      document.getElementById("image9").value = "";
      document.getElementById("signature-file").value = "";
      // مسح محتوى العرض المسبق
      document.getElementById("preview-education-office").innerText = "";
      document.getElementById("preview-education-district").innerText = "";
      document.getElementById("preview-school-name").innerText = "";
      document.getElementById("preview-report-title").innerText = "";
      document.getElementById("preview-executer").innerText = "";
      document.getElementById("preview-location").innerText = "";
      document.getElementById("preview-target").innerText = "";
      document.getElementById("preview-beneficiaries").innerText = "";
      document.getElementById("preview-hijri-date").innerText = "";
      document.getElementById("preview-goals").innerText = "";
      document.getElementById("preview-summary").innerText = "";
      for (let i = 1; i <= 9; i++) {
        const imgPrev = document.getElementById("preview-image" + i);
        imgPrev.src = "#";
        imgPrev.style.display = "none";
      }
      document.getElementById("preview-signature").src = "#";
      document.getElementById("preview-signature").style.display = "none";
      // عرض صفحة الإدخال من جديد
      document.getElementById("preview-page").style.display = "none";
      document.getElementById("input-page").style.display = "block";
    };
  </script>

</body>
</html>
